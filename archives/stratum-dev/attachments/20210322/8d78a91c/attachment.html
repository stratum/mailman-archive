<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&gt;&nbsp;Is&nbsp;my&nbsp;workflow&nbsp;for&nbsp;starting&nbsp;the&nbsp;bmv2&nbsp;switch&nbsp;and&nbsp;generating pipeline_cfg.pb.txt&nbsp;correct?&lt;/div&gt;&lt;div&gt;looks&nbsp;ok&nbsp;to&nbsp;me.&nbsp;You&nbsp;might&nbsp;still&nbsp;want&nbsp;to&nbsp;set&nbsp;the&nbsp;--forwarding_pipeline_configs_file&nbsp;to&nbsp;somewhere&lt;/div&gt;&lt;div&gt;writable&nbsp;by&nbsp;Stratum.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;&nbsp;Should&nbsp;I&nbsp;hop&nbsp;onto&nbsp;the&nbsp;container&nbsp;and&nbsp;run&nbsp;the&nbsp;install?&nbsp;Or&nbsp;is&nbsp;there&nbsp;an&nbsp;easier&nbsp;way&nbsp;around&nbsp;this&nbsp;issue?&lt;br&gt;&lt;/div&gt;&lt;div&gt;The&nbsp;&lt;span&nbsp;class=&quot;gmail-im&quot;&gt;update_config.py&nbsp;scripts&nbsp;are&nbsp;pretty&nbsp;old,&nbsp;unmaintained&nbsp;and&nbsp;broken&nbsp;as&nbsp;you&nbsp;just&nbsp;found&nbsp;out.&nbsp;I&#39;d&nbsp;recommend&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&nbsp;class=&quot;gmail-im&quot;&gt;using&nbsp;the&nbsp;P4Runtime-shell&nbsp;instead.&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;If&nbsp;&quot;c&quot;&nbsp;was&nbsp;correct,&nbsp;then&nbsp;&quot;pipeline_cfg.pb.txt&quot;&nbsp;would&nbsp;automatically&nbsp;be&nbsp;<br>
generated&nbsp;and&nbsp;inserted&nbsp;in&nbsp;the&nbsp;switch.&nbsp;Would&nbsp;I&nbsp;also&nbsp;have&nbsp;to&nbsp;perform&nbsp;c)&nbsp;<br>
for&nbsp;all&nbsp;switches?&lt;br&gt;&lt;/div&gt;&lt;div&gt;Yes,&nbsp;each&nbsp;switch&nbsp;needs&nbsp;to&nbsp;have&nbsp;a&nbsp;pipeline.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Max&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Mar&nbsp;22,&nbsp;2021&nbsp;at&nbsp;12:58&nbsp;PM&nbsp;A&nbsp;Sydney&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:asydney007@gmail.com&quot;&gt;asydney007@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;I&#39;m&nbsp;still&nbsp;having&nbsp;a&nbsp;few&nbsp;issues:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;1.&nbsp;Please&nbsp;take&nbsp;note&nbsp;of&nbsp;the&nbsp;following: &lt;div&gt; a)&nbsp;On&nbsp;my&nbsp;host,&nbsp;I&#39;ve&nbsp;created&nbsp;~/stratum/bmv2_config&nbsp;(i.e.&nbsp;in&nbsp;the&nbsp;top&nbsp;level&nbsp;stratum&nbsp;directory)&nbsp;where&nbsp;I&#39;ve&nbsp;added&nbsp;bmv2.json&nbsp;and p4info.txt&nbsp;for&nbsp;loopback.p4.&nbsp;I&#39;ve&nbsp;also&nbsp;added config.txt&nbsp;which&nbsp;contains&nbsp;the&nbsp;ports&nbsp;I&nbsp;would&nbsp;like&nbsp;stratum&nbsp;to&nbsp;use.&lt;/div&gt;&lt;div&gt; b)&nbsp;In&nbsp;the&nbsp;stratum&nbsp;container&nbsp;(/stratum),&nbsp;I&nbsp;run&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;stratum&gt;&nbsp;sudo&nbsp;./bazel-bin/stratum/hal/bin/bmv2/stratum_bmv2&nbsp;\&lt;br&gt; &nbsp; &nbsp;--persistent_config_dir=/stratum/bmv2_config&nbsp;\&nbsp; &lt;br&gt; &nbsp; &nbsp;--chassis_config_file=/stratum/bmv2_config/config.txt&nbsp; \&lt;br&gt; &nbsp; &nbsp;--bmv2_log_level=debug&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;And&nbsp;see&nbsp;the&nbsp;following&nbsp;expected&nbsp;error&nbsp;(i.e.&nbsp;&quot;expected&quot;,&nbsp;since&nbsp;we&nbsp;will&nbsp;generate&nbsp;this&nbsp;file&nbsp;subsequently):&lt;/div&gt;&lt;div&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;/var/run/stratum/pipeline_cfg.pb.txt&nbsp;not&nbsp;found..&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;c)&nbsp;Now&nbsp;back&nbsp;on&nbsp;my&nbsp;host&nbsp;system,&nbsp;I&nbsp;do&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&#39;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;host&gt;&nbsp;cp&nbsp;stratum/hal/bin/bmv2/update_config.py&nbsp;/tmp/&nbsp;&amp;&amp;&nbsp;\&lt;/div&gt;docker&nbsp;run&nbsp;-v&nbsp;/tmp:/tmp&nbsp;-w&nbsp;/tmp&nbsp;p4lang/pi&nbsp;./update_config.py&nbsp;\&lt;br&gt;--grpc-addr&nbsp;&lt;a&nbsp;href=&quot;http://52.117.10.174:9559&quot;&nbsp;target=&quot;_blank&quot;&gt;52.117.10.174:9559&lt;/a&gt;&nbsp;--json&nbsp;bmv2_config/bmv2.json&nbsp;--p4info&nbsp;bmv2_config/p4info.txt&lt;div&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;And&nbsp;get&nbsp;the&nbsp;following&nbsp;error:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;Traceback&nbsp;(most&nbsp;recent&nbsp;call&nbsp;last):&lt;br&gt; &nbsp;File&nbsp;&quot;./update_config.py&quot;,&nbsp;line&nbsp;10,&nbsp;in&nbsp;&lt;module&gt;&lt;br&gt; &nbsp; &nbsp;from&nbsp;p4.v1&nbsp;import&nbsp;p4runtime_pb2&lt;br&gt;ImportError:&nbsp;No&nbsp;module&nbsp;named&nbsp;p4.v1&lt;br&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;I&nbsp;Googled&nbsp;this&nbsp;error&nbsp;and&nbsp;looks&nbsp;like&nbsp;folks&nbsp;have&nbsp;come&nbsp;across&nbsp;this&nbsp;(&lt;a&nbsp;href=&quot;https://github.com/p4lang/tutorials/issues/178&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/p4lang/tutorials/issues/178&lt;/a&gt;)&nbsp;and&nbsp;it&nbsp;appears&nbsp;that&nbsp;perhaps&nbsp;P4Runtime&nbsp;is&nbsp;not&nbsp;installed&nbsp;properly? &lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Questions:&lt;/div&gt;&lt;div&gt;*&nbsp;Is&nbsp;my&nbsp;workflow&nbsp;for&nbsp;starting&nbsp;the&nbsp;bmv2&nbsp;switch&nbsp;and&nbsp;generating pipeline_cfg.pb.txt&nbsp;correct?&lt;/div&gt;&lt;div&gt;*&nbsp;Should&nbsp;I&nbsp;hop&nbsp;onto&nbsp;the&nbsp;container&nbsp;and&nbsp;run&nbsp;the&nbsp;install?&nbsp;Or&nbsp;is&nbsp;there&nbsp;an&nbsp;easier&nbsp;way&nbsp;around&nbsp;this&nbsp;issue?&lt;/div&gt;&lt;div&gt;*&nbsp;If&nbsp;&quot;c&quot;&nbsp;was&nbsp;correct,&nbsp;then&nbsp;&quot;pipeline_cfg.pb.txt&quot;&nbsp;would&nbsp;automatically&nbsp;be&nbsp;generated&nbsp;and&nbsp;inserted&nbsp;in&nbsp;the&nbsp;switch.&nbsp;Would&nbsp;I&nbsp;also&nbsp;have&nbsp;to&nbsp;perform&nbsp;c)&nbsp;for&nbsp;all&nbsp;switches?&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks,&lt;/div&gt;&lt;div&gt;-Syd&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;18,&nbsp;2021&nbsp;at&nbsp;10:12&nbsp;PM&nbsp;Maximilian&nbsp;Pudelko&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:max@opennetworking.org&quot;&nbsp;target=&quot;_blank&quot;&gt;max@opennetworking.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;Syd,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&gt;&nbsp;1.&nbsp;Where&nbsp;can&nbsp;I&nbsp;find&nbsp;&quot;p4_pipeline.pb.txt&quot;&nbsp;to&nbsp;run&nbsp;the&nbsp;binary?&lt;/div&gt;&lt;div&gt;That&nbsp;file&nbsp;is&nbsp;the&nbsp;place&nbsp;where&nbsp;Stratum&nbsp;will&nbsp;store&nbsp;a&nbsp;pushed&nbsp;pipeline.&nbsp;It&nbsp;can&nbsp;only&nbsp;be&nbsp;set&nbsp;via&nbsp;the&nbsp;P4Runtime&nbsp;SetForwardingPipelineConfig&nbsp;RPC&nbsp;call.&lt;/div&gt;&lt;div&gt;The&nbsp;&lt;a&nbsp;href=&quot;https://github.com/stratum/stratum/blob/main/stratum/hal/bin/bmv2/README.md#running-the-stratum_bmv2-binary&quot;&nbsp;target=&quot;_blank&quot;&gt;Running&nbsp;the&nbsp;stratum_bmv2&nbsp;binary&nbsp;section&lt;/a&gt;&nbsp;of&nbsp;the&nbsp;README&nbsp;gives&nbsp;an&nbsp;example:&lt;/div&gt;&lt;div&gt;&lt;pre&gt;&lt;code&gt;#&nbsp;run&nbsp;P4Runtime&nbsp;client<br>
cp&nbsp;stratum/hal/bin/bmv2/update_config.py&nbsp;/tmp/&nbsp;&amp;&amp;&nbsp;\<br>
[sudo]&nbsp;docker&nbsp;run&nbsp;-v&nbsp;/tmp:/tmp&nbsp;-w&nbsp;/tmp&nbsp;p4lang/pi&nbsp;./update_config.py&nbsp;\<br>
&nbsp;&nbsp;&nbsp;&nbsp;--grpc-addr&nbsp;&lt;YOUR_HOST_IP_ADDRESS&gt;:9559&nbsp;--json&nbsp;&lt;prog&gt;.json&nbsp;--p4info&nbsp;&lt;prog&gt;.proto.txt<br>
&lt;/code&gt;&lt;span&nbsp;style=&quot;font-family:arial,sans-serif&quot;&gt;&lt;br&gt;You&nbsp;could&nbsp;also&nbsp;use&nbsp;the&nbsp;&lt;a&nbsp;href=&quot;https://github.com/p4lang/p4runtime-shell&quot;&nbsp;target=&quot;_blank&quot;&gt;p4runtime-shell&lt;/a&gt;.&lt;br&gt;&lt;br&gt;&gt;&nbsp;2&nbsp;.&lt;br&gt;Yes,&nbsp;the&nbsp;bmv2&nbsp;binary&nbsp;should&nbsp;bind&nbsp;to&nbsp;all&nbsp;interfaces&nbsp;given&nbsp;in&nbsp;the&nbsp;chassis_config.pb.txt.&lt;br&gt;With&nbsp;some&nbsp;wiring&nbsp;it&nbsp;should&nbsp;be&nbsp;possible&nbsp;to&nbsp;build&nbsp;a&nbsp;web&nbsp;of&nbsp;software&nbsp;switches.&lt;br&gt;But&nbsp;instead&nbsp;of&nbsp;building&nbsp;Stratum&nbsp;many&nbsp;times,&nbsp;check&nbsp;if&nbsp;the&nbsp;Debian&nbsp;package&nbsp;might&nbsp;not&nbsp;be&nbsp;more&nbsp;convenient:&lt;br&gt;&lt;a&nbsp;href=&quot;https://github.com/stratum/stratum/blob/main/stratum/hal/bin/bmv2/BUILD#L81-L98&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/stratum/stratum/blob/main/stratum/hal/bin/bmv2/BUILD#L81-L98&lt;/a&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div&gt;There&nbsp;is&nbsp;also&nbsp;a&nbsp;Stratum-enabled&nbsp;Mininet&nbsp;version,&nbsp;which&nbsp;takes&nbsp;care&nbsp;of&nbsp;a&nbsp;lot&nbsp;of&nbsp;these&nbsp;setup&nbsp;tasks.&nbsp;The&lt;/div&gt;&lt;div&gt;NGSDN&nbsp;tutorial&nbsp;you&nbsp;linked&nbsp;uses&nbsp;it,&nbsp;too.&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Best,&lt;/div&gt;&lt;div&gt;Max&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Thu,&nbsp;Mar&nbsp;18,&nbsp;2021&nbsp;at&nbsp;10:10&nbsp;AM&nbsp;A&nbsp;Sydney&nbsp;via&nbsp;stratum-dev&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:stratum-dev@lists.stratumproject.org&quot;&nbsp;target=&quot;_blank&quot;&gt;stratum-dev@lists.stratumproject.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Stratum&nbsp;folks,&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;I&#39;m&nbsp;attempting&nbsp;to&nbsp;use&nbsp;the&nbsp;stratum&nbsp;standalone&nbsp;instance&nbsp;(&lt;a&nbsp;href=&quot;https://github.com/stratum/stratum/blob/main/stratum/hal/bin/bmv2/README.md&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/stratum/stratum/blob/main/stratum/hal/bin/bmv2/README.md&lt;/a&gt;)&nbsp;to&nbsp;setup&nbsp;a&nbsp;topology&nbsp;on&nbsp;a&nbsp;baremetal server.&nbsp;Can&nbsp;you&nbsp;kindly&nbsp;provide&nbsp;feedback&nbsp;to&nbsp;the&nbsp;following:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;Where&nbsp;can&nbsp;I&nbsp;find&nbsp;&quot;p4_pipeline.pb.txt&quot;&nbsp;to&nbsp;run&nbsp;the&nbsp;binary?&nbsp;In&nbsp;particular,&nbsp;as&nbsp;a&nbsp;simple&nbsp;test,&nbsp;I&#39;m&nbsp;attempting&nbsp;to&nbsp;use&nbsp;the&nbsp;main.p4&nbsp;file&nbsp;shipped&nbsp;with&nbsp;the&nbsp;ngsdn-tutorial (&lt;a&nbsp;href=&quot;https://github.com/opennetworkinglab/ngsdn-tutorial&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/opennetworkinglab/ngsdn-tutorial&lt;/a&gt;).&nbsp;On&nbsp;the&nbsp;tutorial&nbsp;VM,&nbsp;generated&nbsp;the&nbsp;corresponding&nbsp;bmv2.json&nbsp;and&nbsp;p4info.txt&nbsp;(i.e.&nbsp;using&nbsp;make&nbsp;p4-build).&nbsp;Was&nbsp;there&nbsp;some&nbsp;other&nbsp;&quot;p4_pipeline.pb.txt&quot;&nbsp;file&nbsp;generated&nbsp;that&nbsp;I&nbsp;can&nbsp;use&nbsp;on&nbsp;the&nbsp;bare&nbsp;metal&nbsp;setup?&nbsp;Or&nbsp;perhaps,&nbsp;I&nbsp;have&nbsp;to&nbsp;run&nbsp;bmv2.json&nbsp;through&nbsp;some&nbsp;postprocess&nbsp;to&nbsp;get&nbsp;&quot;p4_pipeline.pb.txt&quot;?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;2.&nbsp;Assuming&nbsp;I&#39;ve&nbsp;got&nbsp;a&nbsp;running&nbsp;binary&nbsp;with&nbsp;all&nbsp;the&nbsp;arguments&nbsp;sorted,&nbsp;how&nbsp;can&nbsp;I&nbsp;go&nbsp;about&nbsp;creating&nbsp;a&nbsp;topology&nbsp;of&nbsp;switches?&nbsp;Can&nbsp;I&nbsp;simply&nbsp;create&nbsp;containers/VMs&nbsp;(i.e.&nbsp;with&nbsp;an&nbsp;linux OS),&nbsp;clone&nbsp;the&nbsp;stratum&nbsp;repo&nbsp;on&nbsp;each&nbsp;device,&nbsp;add&nbsp;container/VM&nbsp;interfaces&nbsp;in&nbsp;&quot;chassis_config.pb.txt&quot;,&nbsp;and&nbsp;run&nbsp;the&nbsp;bmv2&nbsp;executable&nbsp;from&nbsp;each&nbsp;device?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;/div&gt;&lt;div&gt;-Syd&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
stratum-dev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:stratum-dev@lists.stratumproject.org&quot;&nbsp;target=&quot;_blank&quot;&gt;stratum-dev@lists.stratumproject.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.stratumproject.org/listinfo/stratum-dev&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.stratumproject.org/listinfo/stratum-dev&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>
&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
