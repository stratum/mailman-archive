<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Thank&nbsp;you&nbsp;for&nbsp;your&nbsp;reply.&nbsp;I&nbsp;will&nbsp;look&nbsp;into&nbsp;it!&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;Carmelo&nbsp;Cascone&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:carmelo@opennetworking.org&quot;&gt;carmelo@opennetworking.org&lt;/a&gt;&gt;&nbsp;於&nbsp;2020年4月23日&nbsp;週四&nbsp;上午4:10寫道：&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;style=&quot;overflow-wrap:&nbsp;break-word;&quot;&gt;Hi,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Hopefully&nbsp;this&nbsp;is&nbsp;not&nbsp;too&nbsp;late.&lt;br&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;From&nbsp;the&nbsp;P4Runtime&nbsp;spec&nbsp;(section&nbsp;5):&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://p4.org/p4runtime/spec/master/P4Runtime-Spec.html#sec-master-slave-arbitration-and-controller-replication&quot;&nbsp;target=&quot;_blank&quot;&gt;5. Master-Slave&nbsp;Arbitration&nbsp;and&nbsp;Controller&nbsp;Replication&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;i&gt;Streaming&nbsp;of&nbsp;notifications&nbsp;(e.g.&nbsp;digests)&nbsp;and&nbsp;packet&nbsp;I/O: The&nbsp;same&nbsp;streaming&nbsp;channel&nbsp;will&nbsp;be&nbsp;used&nbsp;for&nbsp;streaming&nbsp;notifications,&nbsp;as&nbsp;well&nbsp;as&nbsp;for&nbsp;packet-in&nbsp;and&nbsp;packet-out messages.&nbsp;Note&nbsp;that&nbsp;unless&nbsp;specified&nbsp;otherwise&nbsp;by&nbsp;the&nbsp;role&nbsp;definitions,&nbsp;only&nbsp;the&nbsp;master&nbsp;controller&nbsp;can&nbsp;participate&nbsp;in&nbsp;packet&nbsp;I/O.&nbsp;This&nbsp;feature&nbsp;is&nbsp;explained&nbsp;in&nbsp;more&nbsp;details&nbsp;in the Packet&nbsp;I/O section.&lt;/i&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;In&nbsp;other&nbsp;words,&nbsp;the&nbsp;spec&nbsp;doesn’t&nbsp;limit&nbsp;the&nbsp;possibility&nbsp;of&nbsp;sending&nbsp;packet-ins&nbsp;to&nbsp;multiple&nbsp;controllers,&nbsp;but&nbsp;you&nbsp;would&nbsp;have&nbsp;to&nbsp;define&nbsp;a&nbsp;“role”&nbsp;for&nbsp;that&nbsp;(see&nbsp;section 5.2. Role&nbsp;Config).&nbsp;However,&nbsp;none&nbsp;of&nbsp;the&nbsp;existing&nbsp;P4Runtime&nbsp;implementations&nbsp;that&nbsp;I’m&nbsp;aware&nbsp;of&nbsp;support&nbsp;any&nbsp;role&nbsp;other&nbsp;than&nbsp;the&nbsp;default&nbsp;one.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;If&nbsp;you&nbsp;want&nbsp;to&nbsp;prototype&nbsp;this&nbsp;capability,&nbsp;your&nbsp;best&nbsp;option&nbsp;is&nbsp;to&nbsp;look&nbsp;at&nbsp;stratum_bmv2,&nbsp;specifically&nbsp;this&nbsp;part&nbsp;of&nbsp;&lt;a&nbsp;href=&quot;http://p4_service.cc&quot;&nbsp;target=&quot;_blank&quot;&gt;p4_service.cc&lt;/a&gt;:&lt;/div&gt;&lt;div&gt;&lt;a&nbsp;href=&quot;https://github.com/stratum/stratum/blob/e0f8b1fcc5d226cd7aef1837e673276721e9d6ba/stratum/hal/lib/common/p4_service.cc#L821&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/stratum/stratum/blob/e0f8b1fcc5d226cd7aef1837e673276721e9d6ba/stratum/hal/lib/common/p4_service.cc#L821&lt;/a&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;might&nbsp;be&nbsp;wrong,&nbsp;but&nbsp;I&nbsp;think&nbsp;the&nbsp;P4Runtime&nbsp;southbound&nbsp;in&nbsp;ONOS&nbsp;doesn&#39;t&nbsp;enforce&nbsp;any&nbsp;mastership&nbsp;check&nbsp;on&nbsp;packet-ins,&nbsp;i.e.,&nbsp;any&nbsp;switch&nbsp;could&nbsp;be&nbsp;sending&nbsp;paket-in&nbsp;messages&nbsp;to&nbsp;any&nbsp;controller&nbsp;instance,&nbsp;including&nbsp;slaves.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Carmelo&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;blockquote&nbsp;type=&quot;cite&quot;&gt;&lt;div&gt;On&nbsp;Apr&nbsp;12,&nbsp;2020,&nbsp;at&nbsp;7:37&nbsp;AM,&nbsp;&lt;a&nbsp;href=&quot;mailto:chenyichientw@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;chenyichientw@gmail.com&lt;/a&gt;&nbsp;wrote:&lt;/div&gt;&lt;br&gt;&lt;div&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Hi&nbsp;all,&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;I&nbsp;am&nbsp;using&nbsp;ONOS&nbsp;1.13&nbsp;with&nbsp;P4Runtime&nbsp;and&nbsp;onos.py&nbsp;to&nbsp;create&nbsp;a&nbsp;cluster.&nbsp;I&nbsp;wonder&nbsp;how&nbsp;can&nbsp;I&nbsp;change&nbsp;ONOS&nbsp;code&nbsp;so&nbsp;that&nbsp;one&nbsp;bmv2&nbsp;switch&nbsp;sends&nbsp;a&nbsp;packet_in&nbsp;message&nbsp;to&nbsp;two&nbsp;different&nbsp;controllers&nbsp;at&nbsp;the&nbsp;same&nbsp;time?&nbsp;I&nbsp;understand&nbsp;that&nbsp;the&nbsp;standard&nbsp;is&nbsp;a&nbsp;switch&nbsp;can&nbsp;have&nbsp;only&nbsp;one&nbsp;master&nbsp;controller.&nbsp;But,&nbsp;I&nbsp;am&nbsp;studying&nbsp;the&nbsp;case&nbsp;for&nbsp;a&nbsp;switch&nbsp;to&nbsp;have&nbsp;multiple&nbsp;controllers. I&nbsp;have&nbsp;already&nbsp;spent&nbsp;a&nbsp;lot&nbsp;of&nbsp;time&nbsp;tracing&nbsp;the&nbsp;code.&nbsp;I&nbsp;found&nbsp;that&nbsp;the&nbsp;doPacketIn()&nbsp;method&nbsp;inside&nbsp;P4RuntimeClientImpl.java&nbsp;is&nbsp;processed&nbsp;by&nbsp;the&nbsp;controller.&nbsp;However,&nbsp;it&nbsp;seems&nbsp;that&nbsp;at&nbsp;the&nbsp;time&nbsp;doPacketIn()&nbsp;is&nbsp;called,&nbsp;it&nbsp;is&nbsp;too&nbsp;late&nbsp;to&nbsp;make&nbsp;the&nbsp;switch&nbsp;sending&nbsp;the&nbsp;control&nbsp;message&nbsp;to&nbsp;a&nbsp;second&nbsp;(another)&nbsp;controller.&nbsp;So,&nbsp;I&nbsp;am&nbsp;wondering&nbsp;when&nbsp;and&nbsp;where&nbsp;the&nbsp;switch&nbsp;code&nbsp;sends&nbsp;a&nbsp;control&nbsp;message&nbsp;to&nbsp;its&nbsp;controller.&nbsp;I&nbsp;would&nbsp;like&nbsp;to&nbsp;change&nbsp;the&nbsp;code.&nbsp;Which&nbsp;java&nbsp;classes,&nbsp;methods,&nbsp;or&nbsp;maybe&nbsp;bmv2&nbsp;code&nbsp;should&nbsp;I&nbsp;look&nbsp;into?&nbsp;Can&nbsp;anyone&nbsp;help?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Thanks!&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;<br>
<br>
--&nbsp;&lt;br&gt;<br>
You&nbsp;received&nbsp;this&nbsp;message&nbsp;because&nbsp;you&nbsp;are&nbsp;subscribed&nbsp;to&nbsp;the&nbsp;Google&nbsp;Groups&nbsp;&quot;ONOS&nbsp;Developers&quot;&nbsp;group.&lt;br&gt;<br>
To&nbsp;unsubscribe&nbsp;from&nbsp;this&nbsp;group&nbsp;and&nbsp;stop&nbsp;receiving&nbsp;emails&nbsp;from&nbsp;it,&nbsp;send&nbsp;an&nbsp;email&nbsp;to&nbsp;&lt;a&nbsp;href=&quot;mailto:onos-dev+unsubscribe@onosproject.org&quot;&nbsp;target=&quot;_blank&quot;&gt;onos-dev+unsubscribe@onosproject.org&lt;/a&gt;.&lt;br&gt;<br>
To&nbsp;view&nbsp;this&nbsp;discussion&nbsp;on&nbsp;the&nbsp;web&nbsp;visit&nbsp;&lt;a&nbsp;href=&quot;https://groups.google.com/a/onosproject.org/d/msgid/onos-dev/81f428f8-9dc0-4ff9-8b16-4517cdc0fb14%40onosproject.org?utm_medium=email&amp;utm_source=footer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://groups.google.com/a/onosproject.org/d/msgid/onos-dev/81f428f8-9dc0-4ff9-8b16-4517cdc0fb14%40onosproject.org&lt;/a&gt;.&lt;br&gt;<br>
&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
