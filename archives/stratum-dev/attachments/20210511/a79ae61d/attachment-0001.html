<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;Glad&nbsp;you&nbsp;could&nbsp;make&nbsp;it&nbsp;work&nbsp;and&nbsp;thanks&nbsp;for&nbsp;writing&nbsp;up&nbsp;the&nbsp;solution.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Max&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;May&nbsp;3,&nbsp;2021&nbsp;at&nbsp;12:58&nbsp;PM&nbsp;A&nbsp;Sydney&nbsp;via&nbsp;stratum-dev&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:stratum-dev@lists.stratumproject.org&quot;&gt;stratum-dev@lists.stratumproject.org&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;br&gt;&lt;/div&gt;I&nbsp;was&nbsp;able&nbsp;to&nbsp;resolve&nbsp;the&nbsp;issue.&nbsp;Below&nbsp;is&nbsp;a&nbsp;quick&nbsp;summary:&lt;div&gt;Problem:&nbsp;The&nbsp;ONOS&nbsp;GUI&nbsp;did&nbsp;not&nbsp;show&nbsp;any&nbsp;links&nbsp;and&nbsp;further&nbsp;investigation&nbsp;showed&nbsp;that&nbsp;LLDP&nbsp;traffic&nbsp;was&nbsp;not&nbsp;observed&nbsp;in&nbsp;the&nbsp;stratum_bmv2&nbsp;log.&lt;/div&gt;&lt;div&gt;Solution:&nbsp;I&nbsp;specified&nbsp;the&nbsp;&quot;cpu_port&quot;&nbsp;argument&nbsp;when&nbsp;stratum_bmv2&nbsp;starts-up&nbsp;(i.e.&nbsp;cpu_port&nbsp;was&nbsp;set&nbsp;to&nbsp;255,&nbsp;which&nbsp;is&nbsp;the&nbsp;same&nbsp;port&nbsp;used&nbsp;in&nbsp;the&nbsp;p4&nbsp;program).&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;PS.&nbsp;Feel&nbsp;free&nbsp;to&nbsp;read&nbsp;below&nbsp;for&nbsp;more&nbsp;details:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Cheers!&lt;/div&gt;&lt;div&gt;-Syd&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&nbsp;class=&quot;gmail_attr&quot;&gt;On&nbsp;Mon,&nbsp;Apr&nbsp;26,&nbsp;2021&nbsp;at&nbsp;1:41&nbsp;PM&nbsp;A&nbsp;Sydney&nbsp;&lt;&lt;a&nbsp;href=&quot;mailto:asydney007@gmail.com&quot;&nbsp;target=&quot;_blank&quot;&gt;asydney007@gmail.com&lt;/a&gt;&gt;&nbsp;wrote:&lt;br&gt;&lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Stratum&nbsp;folks,&lt;div&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; It&nbsp;appears&nbsp;that&nbsp;traffic&nbsp;is&nbsp;not&nbsp;forwarded&nbsp;by&nbsp;the&nbsp;BMv2&nbsp;standalone&nbsp;instances.&nbsp;Here&nbsp;are&nbsp;more&nbsp;details:&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;1.&nbsp;I&nbsp;used&nbsp;Max&#39;s&nbsp;instructions&nbsp;to&nbsp;create&nbsp;standalone&nbsp;BMv2&nbsp;instances&nbsp;running&nbsp;on&nbsp;Debian&nbsp;10.&lt;/div&gt;&lt;div&gt;2.&nbsp;I&nbsp;created&nbsp;an&nbsp;SdnTest&nbsp;app&nbsp;on&nbsp;ONOS&nbsp;with&nbsp;the&nbsp;identical&nbsp;pipeconf,&nbsp;bmv2.json,&nbsp;and&nbsp;p4info.txt&nbsp;files&nbsp;from&nbsp;the&nbsp;ngsdn-tutorial&nbsp;app&nbsp;(i.e.&nbsp;the&nbsp;same&nbsp;working&nbsp;versions&nbsp;of&nbsp;these&nbsp;files&nbsp;from&nbsp;the&nbsp;ngsdn-tutorial&nbsp;VM&nbsp;are&nbsp;used&nbsp;in&nbsp;a&nbsp;different&nbsp;setup&nbsp;with&nbsp;a&nbsp;different&nbsp;ONOS&nbsp;controller&nbsp;and&nbsp;6&nbsp;standalone&nbsp;bmv2&nbsp;switches).&nbsp;(&lt;a&nbsp;href=&quot;https://github.com/opennetworkinglab/ngsdn-tutorial&quot;&nbsp;target=&quot;_blank&quot;&gt;https://github.com/opennetworkinglab/ngsdn-tutorial&lt;/a&gt;).&lt;/div&gt;&lt;div&gt;3.&nbsp;I&nbsp;created&nbsp;a&nbsp;custom&nbsp;6-node&nbsp;Clos&nbsp;topology&nbsp;and&nbsp;I&#39;ve&nbsp;attached&nbsp;the&nbsp;corresponding&nbsp;netcfg.json&nbsp;in&nbsp;the&nbsp;tarball.&lt;/div&gt;&lt;div&gt;4.&nbsp;Onos&nbsp;starts&nbsp;up&nbsp;just&nbsp;fine&nbsp;and&nbsp;I&nbsp;ensure&nbsp;that&nbsp;all&nbsp;apps&nbsp;(similar&nbsp;to&nbsp;the&nbsp;ones&nbsp;running&nbsp;on&nbsp;ngsdn-tutorial)&nbsp;are&nbsp;fired-up&nbsp;(See&nbsp;onos_cli_log&nbsp;in&nbsp;attached).&lt;/div&gt;&lt;div&gt;5.&nbsp;I&nbsp;then&nbsp;push&nbsp;netcfg.json&nbsp;to&nbsp;onos,&nbsp;and&nbsp;the&nbsp;onos&nbsp;logs&nbsp;show&nbsp;a&nbsp;few&nbsp;&quot;Failed&nbsp;to&nbsp;register&nbsp;Bandwidth&quot;&nbsp;and&nbsp;&quot;Failed&nbsp;to&nbsp;register&nbsp;Port&quot;&nbsp;errors&nbsp;(See&nbsp;onos_log&nbsp;in&nbsp;attached&nbsp;tarball):&nbsp;Note:&nbsp;After&nbsp;digging&nbsp;a&nbsp;bit,&nbsp;it&nbsp;appears&nbsp;that&nbsp;these&nbsp;messages&nbsp;originate&nbsp;from&nbsp;ResourceDeviceListener.java&nbsp;on&nbsp;line&nbsp;162&nbsp;when&nbsp;&quot;log.isTraceEnabled()&quot;&nbsp;is&nbsp;not&nbsp;set&nbsp;in&nbsp;ConsistentResourceStore&nbsp;on&nbsp;line&nbsp;122&nbsp;(So&nbsp;this&nbsp;essentially&nbsp;may&nbsp;not&nbsp;be&nbsp;an&nbsp;issue?).&nbsp;In&nbsp;any&nbsp;case,&nbsp;onos_cli_log&nbsp;shows&nbsp;that&nbsp;all&nbsp;devices&nbsp;are&nbsp;connected&nbsp;and&nbsp;available.&nbsp;Interestingly,&nbsp;the &quot;Tx&quot;&nbsp;portstat&nbsp;remains&nbsp;at&nbsp;0.&nbsp;Given&nbsp;the&nbsp;fact&nbsp;the&nbsp;the&nbsp;lldpprovider&nbsp;app&nbsp;is&nbsp;running,&nbsp;I&nbsp;would&nbsp;expect&nbsp;at&nbsp;least&nbsp;LLDP&nbsp;traffic&nbsp;to&nbsp;be&nbsp;flowing.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;6.&nbsp;As&nbsp;an&nbsp;example,&nbsp;I&nbsp;logged&nbsp;onto&nbsp;leaf1&nbsp;to&nbsp;take&nbsp;a&nbsp;look&nbsp;at&nbsp;the&nbsp;logs,&nbsp;and&nbsp;from&nbsp;the&nbsp;terminal,&nbsp;I&nbsp;see&nbsp;the&nbsp;following&nbsp;(See&nbsp;leaf1_stratum_terminal_log&nbsp;for&nbsp;more&nbsp;details):&lt;/div&gt;&lt;div&gt;&quot;&quot;&quot;&lt;br&gt;&lt;/div&gt;&lt;div&gt;E20210426&nbsp;16:01:18.918056&nbsp; 5458&nbsp;p4_service.cc:311]&nbsp;Failed&nbsp;to&nbsp;write&nbsp;forwarding&nbsp;entries&nbsp;to&nbsp;node&nbsp;1:&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;occurs&nbsp;when&nbsp;an&nbsp;attempt&nbsp;is&nbsp;made&nbsp;to&nbsp;install&nbsp;a&nbsp;flow&nbsp;that&nbsp;already&nbsp;exists.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;&quot;&quot;&quot;&lt;/div&gt;&lt;div&gt;So&nbsp;when&nbsp;the&nbsp;switch&nbsp;starts&nbsp;up,&nbsp;the&nbsp;initial&nbsp;&quot;chassis_config_file&quot;&nbsp;lists&nbsp;all&nbsp;8&nbsp;ports&nbsp;on&nbsp;all&nbsp;switches.&nbsp;However,&nbsp;netcfg.json&nbsp;specifies&nbsp;6&nbsp;of&nbsp;the&nbsp;8.&nbsp;When&nbsp;I&nbsp;take&nbsp;a&nbsp;look&nbsp;through&nbsp;the&nbsp;onos&nbsp;web&nbsp;GUI,&nbsp;I&nbsp;still&nbsp;see&nbsp;all&nbsp;8&nbsp;ports&nbsp;which&nbsp;implies&nbsp;that&nbsp;perhaps&nbsp;there&nbsp;may&nbsp;be&nbsp;issues&nbsp;pushing&nbsp;the&nbsp;updated&nbsp;chassis_config_file&nbsp;to&nbsp;the&nbsp;switch?&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;7.&nbsp;When&nbsp;I&nbsp;look&nbsp;through&nbsp;the&nbsp;details&nbsp;debug&nbsp;log&nbsp;for&nbsp;leaf1&nbsp;(see&nbsp;leaf1_log_written_to_file),&nbsp;I&nbsp;only&nbsp;see&nbsp;1&nbsp;LLDP&nbsp;pkt&nbsp;(i.e.&nbsp;ethtype&nbsp;88cc),&nbsp;though&nbsp;tcpdump&nbsp;from&nbsp;the&nbsp;controller&nbsp;shows&nbsp;that&nbsp;the&nbsp;controller&nbsp;is&nbsp;indeed&nbsp;sending&nbsp;numerous&nbsp;discovery&nbsp;pkts.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;This&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;the&nbsp;log&nbsp;when&nbsp;lldphostprovider adds&nbsp;the&nbsp;LLDP&nbsp;rule&nbsp;to&nbsp;the&nbsp;switch.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;/div&gt;&lt;div&gt;PS.&nbsp;I&#39;ve&nbsp;attached&nbsp;a&nbsp;tarball&nbsp;with&nbsp;the&nbsp;various&nbsp;log&nbsp;files&nbsp;and&nbsp;a&nbsp;ReadMe&nbsp;describing&nbsp;the&nbsp;contents&nbsp;of&nbsp;each&nbsp;file.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Can&nbsp;you&nbsp;kindly&nbsp;provide&nbsp;feedback&nbsp;on&nbsp;perhaps&nbsp;why&nbsp;traffic&nbsp;(at&nbsp;least&nbsp;LLDP)&nbsp;is&nbsp;not&nbsp;forwarded&nbsp;by&nbsp;the&nbsp;switches?&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Using&nbsp;tcpdump,&nbsp;I&nbsp;observed&nbsp;that&nbsp;LLDP&nbsp;traffic&nbsp;was&nbsp;sent&nbsp;from&nbsp;the&nbsp;controller&nbsp;and&nbsp;made&nbsp;it&nbsp;to&nbsp;the&nbsp;switch.&nbsp;However,&nbsp;the&nbsp;bmv2&nbsp;logs&nbsp;did&nbsp;not&nbsp;register&nbsp;any&nbsp;LLDP&nbsp;traffic&nbsp;on&nbsp;port&nbsp;255&nbsp;(i.e.&nbsp;the&nbsp;CPU&nbsp;port&nbsp;specified&nbsp;in&nbsp;the&nbsp;p4&nbsp;program).&nbsp;I&nbsp;took&nbsp;a&nbsp;look&nbsp;at&nbsp;how&nbsp;stratum_bmv2&nbsp;starts&nbsp;from&nbsp;the&nbsp;ngsdn-tutorial&nbsp;vm&nbsp;and&nbsp;observed&nbsp;that&nbsp;&quot;cpu_port&quot;&nbsp;was&nbsp;one&nbsp;of&nbsp;the arguments&nbsp;and&nbsp;was&nbsp;set&nbsp;to&nbsp;255.&nbsp;For&nbsp;some&nbsp;reason,&nbsp;I&nbsp;thought&nbsp;that&nbsp;255&nbsp;was&nbsp;the&nbsp;default&nbsp;CPU&nbsp;port&nbsp;but&nbsp;it&nbsp;turns&nbsp;out&nbsp;that&nbsp;the&nbsp;default&nbsp;port&nbsp;is&nbsp;64. &nbsp;So&nbsp;I&nbsp;specified&nbsp;the&nbsp;&quot;cpu_port&quot;&nbsp;argument&nbsp;in&nbsp;testrig and&nbsp;pkt-in/outs&nbsp;now&nbsp;work&nbsp;and&nbsp;hence&nbsp;LLDP&nbsp;works.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0px&nbsp;0px&nbsp;0px&nbsp;0.8ex;border-left:1px&nbsp;solid&nbsp;rgb(204,204,204);padding-left:1ex&quot;&gt;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;BTW.&nbsp;I&nbsp;also&nbsp;tried&nbsp;to&nbsp;connect&nbsp;to&nbsp;leaf1&nbsp;via&nbsp;&quot;util/p4rt-sh&quot;,&nbsp;install&nbsp;flow&nbsp;rules&nbsp;to&nbsp;foward&nbsp;traffic&nbsp;between&nbsp;ports&nbsp;5&nbsp;and&nbsp;6,&nbsp;but&nbsp;a&nbsp;quick&nbsp;ping&nbsp;showed&nbsp;that&nbsp;traffic&nbsp;was&nbsp;not&nbsp;flowing:&nbsp;I&nbsp;also&nbsp;used&nbsp;tcpdump&nbsp;on&nbsp;leaf1&nbsp;to&nbsp;verify&nbsp;that&nbsp;indeed&nbsp;no&nbsp;pkts&nbsp;were&nbsp;making&nbsp;it&nbsp;on&nbsp;ports&nbsp;5&nbsp;and&nbsp;6&nbsp;(except&nbsp;dhcp&nbsp;which&nbsp;is&nbsp;expected).&lt;/div&gt;&lt;/div&gt;&lt;/blockquote&gt;&lt;div&gt;This&nbsp;was&nbsp;a&nbsp;result&nbsp;of&nbsp;the&nbsp;behavior&nbsp;of&nbsp;the&nbsp;protocols&nbsp;in&nbsp;my&nbsp;environment.&nbsp;I&nbsp;had&nbsp;to&nbsp;add&nbsp;new&nbsp;tables&nbsp;and&nbsp;their&nbsp;corresponding&nbsp;ONOS&nbsp;components,&nbsp;and&nbsp;now&nbsp;traffic&nbsp;flows&nbsp;just&nbsp;fine.&lt;/div&gt;&lt;div&gt; &lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;<br>
_______________________________________________&lt;br&gt;<br>
stratum-dev&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:stratum-dev@lists.stratumproject.org&quot;&nbsp;target=&quot;_blank&quot;&gt;stratum-dev@lists.stratumproject.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.stratumproject.org/listinfo/stratum-dev&quot;&nbsp;rel=&quot;noreferrer&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.stratumproject.org/listinfo/stratum-dev&lt;/a&gt;&lt;/blockquote&gt;&lt;/div&gt;<br>

</tt>
