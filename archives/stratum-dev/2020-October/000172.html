<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:stratum-dev%40lists.stratumproject.org?Subject=Re%3A%20%5Bstratum-dev%5D%20Questions%20regarding%20pushing%20pipeline%20configs%20to%0A%20barefoot%20Tofino%20switch&In-Reply-To=%3CCAFh9Y_NGshH955wSw6NkdXcSzeO2VeF8g81NmBELZcT3Wb0OsA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=utf-8">
   <LINK REL="Previous"  HREF="000171.html">
   <LINK REL="Next"  HREF="000173.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch</H1>
    <B>Maximilian Pudelko</B> 
    <A HREF="mailto:stratum-dev%40lists.stratumproject.org?Subject=Re%3A%20%5Bstratum-dev%5D%20Questions%20regarding%20pushing%20pipeline%20configs%20to%0A%20barefoot%20Tofino%20switch&In-Reply-To=%3CCAFh9Y_NGshH955wSw6NkdXcSzeO2VeF8g81NmBELZcT3Wb0OsA%40mail.gmail.com%3E"
       TITLE="[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch">max at opennetworking.org
       </A><BR>
    <I>Mon Oct 26 22:10:41 UTC 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="000171.html">[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch
</A></li>
        <LI>Next message (by thread): <A HREF="000173.html">[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#172">[ date ]</a>
              <a href="thread.html#172">[ thread ]</a>
              <a href="subject.html#172">[ subject ]</a>
              <a href="author.html#172">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Zoey,

Yi summarized it pretty well. While the extern flag is required, Stratum
should not segfault.
If you could post the error log we could see how to handle this better.

Max

On Mon, Oct 26, 2020 at 2:24 PM Yi Tseng via stratum-dev &lt;
<A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">stratum-dev at lists.stratumproject.org</A>&gt; wrote:

&gt;<i> Hi Zoey,
</I>&gt;<i>
</I>&gt;<i> We believed that Barefoot will add support for converting Register extern
</I>&gt;<i> to the standard one in the next Barefoot's SDE release.
</I>&gt;<i>
</I>&gt;<i> Also, the current stratum_bf doesn't support register since the PI
</I>&gt;<i> framework doesn't support it (Implementation here
</I>&gt;<i> &lt;<A HREF="https://github.com/p4lang/PI/blob/master/proto/frontend/src/device_mgr.cpp#L2059-L2061">https://github.com/p4lang/PI/blob/master/proto/frontend/src/device_mgr.cpp#L2059-L2061</A>&gt;
</I>&gt;<i> )
</I>&gt;<i>
</I>&gt;<i> Currently, we are working on a new Stratum target called stratum_bfrt
</I>&gt;<i> which is based on Barefoot's BfRt C++ API (Pull request here
</I>&gt;<i> &lt;<A HREF="https://github.com/stratum/stratum/pull/337">https://github.com/stratum/stratum/pull/337</A>&gt;).
</I>&gt;<i> And it should support the native P4Runtime register messages.
</I>&gt;<i>
</I>&gt;<i> Yi
</I>&gt;<i>
</I>&gt;<i> On Mon, Oct 26, 2020 at 9:26 AM zzha via stratum-dev &lt;
</I>&gt;<i> <A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">stratum-dev at lists.stratumproject.org</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Hi there,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have built and started Stratum on a Tofino switch. But when I was
</I>&gt;&gt;<i> trying to install a pipeline configuration through p4runtime-shell, Stratum
</I>&gt;&gt;<i> reports a segmentation fault if the P4 program is compiled without
</I>&gt;&gt;<i> &quot;--p4runtime-force-std-externs&quot; flag. However, with this p4c compilation
</I>&gt;&gt;<i> flag, for programs that use Tofino specific externs like registers, the
</I>&gt;&gt;<i> compiler will report a warning that says &quot;No known conversion to standard
</I>&gt;&gt;<i> P4Info for 'Register' extern type&quot;. Any suggestions on how to fix this
</I>&gt;&gt;<i> would be greatly appreciated!
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Best regards,
</I>&gt;&gt;<i> Zoey
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> stratum-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">stratum-dev at lists.stratumproject.org</A>
</I>&gt;&gt;<i> <A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">https://lists.stratumproject.org/listinfo/stratum-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Yi Tseng
</I>&gt;<i> Member of Technical Staff
</I>&gt;<i> Open Networking Foundation
</I>&gt;<i> <A HREF="https://www.opennetworking.org/">https://www.opennetworking.org/</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> stratum-dev mailing list
</I>&gt;<i> <A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">stratum-dev at lists.stratumproject.org</A>
</I>&gt;<i> <A HREF="https://lists.stratumproject.org/listinfo/stratum-dev">https://lists.stratumproject.org/listinfo/stratum-dev</A>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.stratumproject.org/archives/stratum-dev/attachments/20201026/2c13bc95/attachment.html">https://lists.stratumproject.org/archives/stratum-dev/attachments/20201026/2c13bc95/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="000171.html">[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch
</A></li>
	<LI>Next message (by thread): <A HREF="000173.html">[stratum-dev] Questions regarding pushing pipeline configs to barefoot Tofino switch
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#172">[ date ]</a>
              <a href="thread.html#172">[ thread ]</a>
              <a href="subject.html#172">[ subject ]</a>
              <a href="author.html#172">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.stratumproject.org/listinfo/stratum-dev">More information about the stratum-dev
mailing list</a><br>
</body></html>
